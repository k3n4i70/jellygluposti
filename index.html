<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>Jellycat World | Firebase Store</title>
    <link rel="stylesheet" href="style.css"> <!-- –ü–æ–ª–∑–≤–∞–º–µ —Å—ä—â–∏—è CSS –æ—Ç –ø—Ä–µ–¥–∏ -->
</head>
<body>

<header>
    <a href="#" class="logo">üß∏ Jellycat Shop</a>
    <nav>
        <button id="showAll" class="btn-nav">–í—Å–∏—á–∫–∏</button>
        <button id="showRetired" class="btn-nav">Retired</button>
    </nav>
</header>

<section class="hero">
    <h1>–¢–≤–æ–∏—Ç–µ Firebase –ü—Ä–∏—è—Ç–µ–ª–∏</h1>
    <p>–î–∞–Ω–Ω–∏—Ç–µ –∏–¥–≤–∞—Ç –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –æ–±–ª–∞–∫–∞!</p>
</section>

<div class="container">
    <div id="product-container" class="product-grid">
        <!-- –¢—É–∫ JavaScript —â–µ –≤–º—ä–∫–Ω–µ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ -->
        <p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—É—Ö–∫–∞–≤–∏ –∏–≥—Ä–∞—á–∫–∏...</p>
    </div>
</div>

<!-- FIREBASE SDK (Modular) -->
<script type="module">
  // 1. –í–Ω–æ—Å –Ω–∞ –Ω—É–∂–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // 2. –¢–≤–æ—è—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ö–û–ü–ò–†–ê–ô –Ø –û–¢ FIREBASE CONSOLE)
  const firebaseConfig = {
    apiKey: "AIzaSyBkrjRjqo__uK4lOPR9n4MuzUogEgE7mTg",
    authDomain: "jellygluposti-c87b2.firebaseapp.com",
    projectId: "jellygluposti-c87b2",
    storageBucket: "jellygluposti-c87b2.firebasestorage.app",
    messagingSenderId: "214701739480",
    appId: "1:214701739480:web:523484045b901669c236ad"
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // 3. –§—É–Ω–∫—Ü–∏—è –∑–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ –∏ –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ
  async function loadProducts(filterStatus = null) {
    const container = document.getElementById('product-container');
    container.innerHTML = ''; // –ò–∑—á–∏—Å—Ç–≤–∞–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

    let q;
    if (filterStatus) {
      // –ó–∞—è–≤–∫–∞ –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ (–ó–∞—è–≤–∫–∞ 2 –æ—Ç SQL –ø—Ä–∏–º–µ—Ä–∞ —Ç–∏)
      q = query(collection(db, "products"), where("status", "==", filterStatus));
    } else {
      // –í—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏
      q = query(collection(db, "products"), orderBy("price", "asc"));
    }

    const querySnapshot = await getDocs(q);
    
    querySnapshot.forEach((doc) => {
      const p = doc.data();
      const productHTML = `
        <div class="product-card">
            <span class="status-badge ${p.status === 'Retired' ? 'status-retired' : ''}">${p.status}</span>
            <img src="${p.imageurl}" alt="${p.name}" onerror="this.src='https://placehold.co/400x400?text=Jellycat'">
            <h3>${p.name}</h3>
            <p class="price">${p.price} ‚Ç¨</p>
            <button class="btn">–ö—É–ø–∏</button>
        </div>
      `;
      container.innerHTML += productHTML;
    });
  }

  // –°–∫—Ä–∏–ø—Ç –∑–∞ –±—É—Ç–æ–Ω–∏—Ç–µ
  document.getElementById('showAll').addEventListener('click', () => loadProducts());
  document.getElementById('showRetired').addEventListener('click', () => loadProducts('Retired'));

  // –ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
  loadProducts();

</script>

<style>
    /* –ú–∞–ª–∫–æ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–µ–Ω —Å—Ç–∏–ª –∑–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è—Ç–∞ */
    .btn-nav {
        background: none;
        border: 2px solid var(--primary-color);
        padding: 5px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-family: inherit;
        font-weight: bold;
    }
    .btn-nav:hover {
        background: var(--primary-color);
        color: white;
    }
</style>

</body>
</html>